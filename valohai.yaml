---
- step:
    name: Preprocess Dataset
    image: python:3.6
    command:
      - pip install -r requirements.txt
      - python pre-processing.py
    inputs:
      - name: dataset
        default: https://depprocureformstorage.blob.core.windows.net/iris-dataset/input/Iris.csv

- step:
    name: train-model
    image: valohai/notebook:sklearn-0.24.2
    command:
      - pip install -r requirements.txt
      - python ./train.py 
    inputs:
      - name: dataset
        default: datum://01806ecf-1182-ee2a-1c45-4484c447375d
        
- pipeline:
    name: Training pipeline
    nodes:
      - name: preprocess
        type: execution
        step: Preprocess Dataset
      - name: train
        type: execution
        step: train-model
    edges:
      - [preprocess.output.iris_preprocessed.csv, train.input.iris_preprocessed.csv]
